events {}

http {
  server {
    listen 80;

    # --- Proxy API routes ---
    location /auth/ {
      proxy_pass http://auth-service:8081/;
    }

    location /wallet/ {
      proxy_pass http://wallet-service:8082/;
    }

    location /tx/ {
      proxy_pass http://transaction-service:8083/;
    }

    location /cashapp/ {
      proxy_pass http://cashapp-proxy:8084/;
    }

    # --- Frontend static site ---
    location / {
      root /usr/share/nginx/html;
      index casino_gateway.html;

      # For single-page app style routing
      try_files $uri /casino_gateway.html;
    }

    # --- Error handling ---
    error_page 404 /casino_gateway.html;
  }
}